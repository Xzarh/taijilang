["begin!",
  ["extern!","do"],
  ["#=", "when",
    ["->", ["cond",["x...","body"]],
      [["quasiquote!",["if",["unquote!","cond"],["unquote-splice","body"]]]]]],
  ["#=", "unless",
    ["->", ["cond",["x...","body"]],
      [["quasiquote!",["if", ["!x",["unquote!","cond"]],
        ["unquote-splice","body"]]]]]],
  ["=","arrayInit",["->",["len","obj"],[["=","ret",[]],"ret"]]],
  ["=","arrayInit2d",["->",["m","n","obj"],[["=","ret",[]],"ret"]]],
  ["directLineComment!","////////////////////// Iteration and Looping ////////////////////\r\n"],
  ["#=", "each",
    ["->", ["arr",["x...","rest"]],
      [["call!",["attribute!","arr","forEach"],["rest"]]]]],
  ["#=", "reduce",
    ["->", ["arr",["x...","rest"]],
      [["call!",["attribute!","arr","reduce"],["rest"]]]]],
  ["#=", "each2d",
    ["->", ["arr","fn"],
      [["each","arr",["->", ["elem","i","oa"],
        [["each","elem",["->", ["val","j","ia"],
          [["fn","val","j","i","ia","oa"]]]]]]]]]],
  ["=", "map",
    ["->", ["arr",["x...","rest"]],
      [["call!",["attribute!","arr","map"],["rest"]]]]],
  ["=", "filter",
    ["->", [["x...","rest"]],
      [["call!",["attribute!",["attribute!",["attribute!","Array","::"],"filter"]
        "call"]
        ["rest"]]]]],
  ["=", "some",
    ["->", [["x...","rest"]],
      [["call!",["attribute!",["attribute!",["attribute!","Array","::"],"some"]
        "call"]
        ["rest"]]]]],
  ["=", "every",
    ["->", [["x...","rest"]],
      [["call!",["attribute!",["attribute!",["attribute!","Array","::"],"every"]
        "call"]
        ["rest"]]]]],
  ["#",["extern!","str","eachKey"]],
  ["directLineComment!","//////////////////// Templates ////////////////////////////\r\n"],
  ["#=", "template",
    ["->", ["name","args",["x...","rest"]],
      [["=","name",["->",["args"],[["str","rest"]]]]]]],
  ["#=", "templateRepeat",
    ["->", ["arg",["x...","rest"]],
      [["reduce","arg",["->", ["memo","elem","index"],
        [["memo",["+x",["call!","str",["rest"]]],["string!"]]]]]]]],
  ["#=", "templateRepeatKey",
    ["->", ["obj",["x...","rest"]],
      [["begin!",
        ["=","ret",["string!"]],
        ["eachKey","obj",["->", ["value","key"],
          [["+=","ret",["call!","str",["rest"]]]]]],
        "ret"]]]],
  ["directLineComment!","/////////////////// Callback Sequence ////////////////////;\r\n"],
  ["#=", "sequence",
    ["->", ["name","args","init",["x...","rest"]],
      [["->", ["args"],
        [["->", [],
          [["attribute!","@","init"],["=","curr",0]
            ["=","actions",["new",["Array","rest"]]]
            ["var","next"]
            ["=", "next",
              ["->", [],
                [["=","ne",["index!","actions",["x++","curr"]]]
                  ["if", "ne",
                    "ne",
                    ["throw",["string!","\"Call to [\"",["list!","next"]
                      "\"]\""
                      "\" beyond sequence.\""]]]]]]
            ["call!","next",[]]]]]]]]],
  ["directLineComment!","//////////////////; Unit Testing ////////////////////////////;\r\n"],
  ["#",["extern!","array","Date"]],
  ["#=", "assert",
    ["->", ["cond","message"],
      [["if", "cond",
        ["string!","\"Passed - \"","message"],
        ["string!","\"Failed - \"","message"]]]]],
  ["#=", "testGroup",
    ["->", ["name",["x...","rest"]],
      [["=","name",["->",[],[["call!","array",["rest"]]]]]]]],
  ["#=", "testRunner",
    ["->", ["groupname","desc"],
      [["=","start",["new","Date"]],["=", "tests",
        ["call!","groupname",[]]]
        ["=","passed",0]
        ["=","failed",0]
        ["each","tests",["->", ["elem"],
          [["if", ["call!",["attribute!","elem","match"],[["regexp!","/^Passed/"]]],
            ["++x","passed"],
            ["++x","failed"]]]]]
        ["str"]]]],
  ["directLineComment!","//////////////// Monads //////////////////////////////////;\r\n"],
  ["#=", "identityMonad",
    ["->", [],
      [["hash!",["jshashitem!","mBind",["list!",["->",["mv","mf"],[["call!","mf",["mv"]]]]]]
        ["jshashitem!","mResult",["list!",["->",["v"],["v"]]]]]]]]]